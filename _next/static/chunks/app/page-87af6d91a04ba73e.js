(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{464:(e,t,s)=>{Promise.resolve().then(s.bind(s,5740))},5740:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var a=s(5155),r=s(2115),n=s(7768),i=s(2596),l=s(9688);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,i.$)(t))}let o=n.bL,c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.B8,{ref:t,className:d("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});c.displayName=n.B8.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.l9,{ref:t,className:d("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});u.displayName=n.l9.displayName;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.UC,{ref:t,className:d("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});m.displayName=n.UC.displayName;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});f.displayName="Card";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",s),...r})});x.displayName="CardHeader";let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",s),...r})});w.displayName="CardTitle";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("text-sm text-muted-foreground",s),...r})});h.displayName="CardDescription";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("p-6 pt-0",s),...r})});g.displayName="CardContent";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",s),...r})});p.displayName="CardFooter";var v=s(9708),b=s(2085);let j=(0,b.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:i=!1,...l}=e,o=i?v.DX:"button";return(0,a.jsx)(o,{className:d(j({variant:r,size:n,className:s})),ref:t,...l})});N.displayName="Button";let y=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});y.displayName="Input";let C=(0,b.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),k=r.forwardRef((e,t)=>{let{className:s,variant:r,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:d(C({variant:r}),s),...n})});k.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:d("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let A=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("text-sm [&_p]:leading-relaxed",s),...r})});A.displayName="AlertDescription";var R=s(1154),D=s(9785),F=s(3550),S=s(5219),E=s(1681),_=s(2741);let P={mDAI:"0x789492C8c1445a795a3C4439579A0Df89B557791",mUSDC:"0xA5F25C6A6C1ae1Dc0941CfB3c7541F18C868572c",mETH:"0xe8aa95A994987cA850ae35443b39ed1deB52aA0f"},B="0x22575a2f08fb2BC328717E0a903B2Cb0e8077274";function T(){let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(""),[i,l]=(0,r.useState)("0.0"),[d,v]=(0,r.useState)("0.0"),[b,j]=(0,r.useState)("0.0"),[C,T]=(0,r.useState)(""),[W,Z]=(0,r.useState)(""),[I,L]=(0,r.useState)(!1),[U,H]=(0,r.useState)(null),[X,q]=(0,r.useState)(""),[M,O]=(0,r.useState)("mDAI"),[z,J]=(0,r.useState)(0);(0,r.useEffect)(()=>{J({mDAI:0,mUSDC:1,mETH:2}[M])},[M]);let V=async()=>{L(!0);try{if(!window.ethereum)throw Error("MetaMask is not installed.");await window.ethereum.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});let e=new S.k(window.ethereum);await e.send("eth_requestAccounts",[]);let s=await e.getSigner(),a=await s.getAddress();n(a),t(!0),await Q(e,a)}catch(e){console.error(e),q(e instanceof Error?e.message:"Failed to connect wallet"),H("error")}finally{L(!1)}},Q=async(e,t)=>{try{let s=["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],a=new E.NZ(P[M],s,e),r=new E.NZ("0x51af42917eB1551958A89CE65edd5be0b1cE4240",s,e),n=new E.NZ(B,["function pendingReward(uint256,address) view returns (uint256)"],e),i=new E.NZ(B,["function userInfo(uint256,address) view returns (uint256 amount, uint256 rewardDebt, uint256 pendingReward)"],e),[d,o]=await Promise.all([a.decimals(),r.decimals()]),[c,u,m]=await Promise.all([a.balanceOf(t),n.pendingReward(z,t),i.userInfo(z,t)]);l(_.Js(c,d)),j(_.Js(u,o)),v(_.Js(m.amount,d))}catch(e){console.error("updateBalances error",e),l("0.0"),j("0.0"),v("0.0")}};(0,r.useEffect)(()=>{if(window.ethereum)return window.ethereum.on("accountsChanged",e=>{0===e.length?(t(!1),n(""),l("0.0"),j("0.0"),v("0.0")):(n(e[0]),Q(new S.k(window.ethereum),e[0]))}),window.ethereum.on("chainChanged",()=>{window.location.reload()}),()=>{window.ethereum.removeAllListeners("accountsChanged"),window.ethereum.removeAllListeners("chainChanged")}},[e]),(0,r.useEffect)(()=>{e&&s&&Q(new S.k(window.ethereum),s)},[e,s,M,z]);let Y=async()=>{if(!(!C||0>=parseFloat(C))){L(!0);try{let e=new S.k(window.ethereum),t=await e.getSigner(),a=new E.NZ(P[M],["function approve(address,uint256)","function decimals() view returns (uint8)","function allowance(address owner, address spender) view returns (uint256)"],t),r=new E.NZ(B,["function deposit(uint256,uint256)"],t),n=await a.decimals(),i=_.XS(C,n);await a.allowance(s,B)<i&&await (await a.approve(B,i)).wait(),await (await r.deposit(z,i)).wait(),await Q(e,s),T(""),H("success"),q("Deposit successful!")}catch(e){console.error("Deposit error:",e),H("error"),q("Deposit failed")}finally{L(!1)}}},$=async()=>{if(!(!W||0>=parseFloat(W)||parseFloat(W)>parseFloat(d))){L(!0);try{let e=new S.k(window.ethereum),t=await e.getSigner(),a=new E.NZ(B,["function withdraw(uint256,uint256)"],t),r=new E.NZ(P[M],["function decimals() view returns (uint8)"],e),n=await r.decimals(),i=_.XS(W,n);await (await a.withdraw(z,i)).wait(),await Q(e,s),Z(""),H("success"),q("Withdraw & Claim successful!")}catch(e){console.error("Withdraw error:",e),H("error"),q("Withdraw & Claim failed")}finally{L(!1)}}},G=async()=>{if(!(0>=parseFloat(b))){L(!0);try{let e=new S.k(window.ethereum),t=await e.getSigner(),a=new E.NZ(B,["function claimRewards(uint256)","function pendingReward(uint256,address) view returns (uint256)"],t);await (await a.claimRewards(z)).wait(),await Q(e,s),H("success"),q("Rewards claimed!")}catch(e){console.error("Claim error:",e),H("error"),q("Claim failed")}finally{L(!1)}}};return(0,r.useEffect)(()=>{if(U){let e=setTimeout(()=>{H(null),q("")},5e3);return()=>clearTimeout(e)}},[U]),(0,a.jsxs)("div",{className:"container max-w-4xl mx-auto py-8 px-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Farming Dapp"}),e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(D.A,{className:"mr-2 h-5 w-5"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[s.substring(0,6),"...",s.substring(s.length-4)]})]}),(0,a.jsxs)("select",{value:M,onChange:e=>O(e.target.value),className:"border rounded px-3 py-1 text-sm",children:[(0,a.jsx)("option",{value:"mDAI",children:"mDAI"}),(0,a.jsx)("option",{value:"mUSDC",children:"mUSDC"}),(0,a.jsx)("option",{value:"mETH",children:"mETH"})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Wallet LP Balance"}),(0,a.jsx)("span",{className:"font-bold",children:i})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Your Liquidity Deposited"}),(0,a.jsx)("span",{className:"font-bold",children:d})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Claimable Rewards"}),(0,a.jsx)("span",{className:"font-bold",children:b})]})]}),U&&(0,a.jsx)(k,{className:"mb-6 ".concat("success"===U?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"),children:(0,a.jsx)(A,{children:X})}),(0,a.jsxs)(o,{defaultValue:"deposit",className:"w-full",children:[(0,a.jsxs)(c,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(u,{value:"deposit",children:"Deposit"}),(0,a.jsx)(u,{value:"withdraw",children:"Withdraw"}),(0,a.jsx)(u,{value:"claim",children:"Claim Rewards"})]}),(0,a.jsx)(m,{value:"deposit",children:(0,a.jsxs)(f,{children:[(0,a.jsx)(x,{children:(0,a.jsx)(w,{children:"Deposit LP Tokens"})}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(y,{value:C,onChange:e=>T(e.target.value),placeholder:"0.0",type:"number"}),(0,a.jsx)(N,{variant:"outline",onClick:()=>T(i),children:"MAX"})]})}),(0,a.jsx)(p,{children:(0,a.jsx)(N,{onClick:Y,disabled:I||!C,children:I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,a.jsx)(a.Fragment,{children:"Deposit"})})})]})}),(0,a.jsx)(m,{value:"withdraw",children:(0,a.jsxs)(f,{children:[(0,a.jsx)(x,{children:(0,a.jsx)(w,{children:"Withdraw LP Tokens"})}),(0,a.jsxs)(g,{children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(y,{value:W,onChange:e=>Z(e.target.value),placeholder:"0.0",type:"number"}),(0,a.jsx)(N,{variant:"outline",onClick:()=>Z(d),children:"MAX"})]}),(0,a.jsxs)("div",{className:"mt-4 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Unclaimed Rewards"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:b})]})]}),(0,a.jsx)(p,{children:(0,a.jsx)(N,{onClick:$,disabled:I||!W,children:I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,a.jsx)(a.Fragment,{children:"Withdraw & Claim"})})})]})}),(0,a.jsx)(m,{value:"claim",children:(0,a.jsxs)(f,{children:[(0,a.jsx)(x,{children:(0,a.jsx)(w,{children:"Claim Rewards"})}),(0,a.jsxs)(g,{className:"text-center",children:[(0,a.jsx)(F.A,{className:"h-12 w-12 text-primary mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:b}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Available Rewards"})]}),(0,a.jsx)(p,{children:(0,a.jsx)(N,{onClick:G,disabled:I||0>=parseFloat(b),children:I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,a.jsx)(a.Fragment,{children:"Claim Rewards"})})})]})})]})]}):(0,a.jsxs)(f,{className:"w-full max-w-md mx-auto",children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(w,{children:"Connect Wallet"}),(0,a.jsx)(h,{children:"Connect your wallet to manage your LP tokens and rewards"})]}),(0,a.jsx)(p,{children:(0,a.jsx)(N,{className:"w-full",onClick:V,disabled:I,children:I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Connecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Connect Wallet"]})})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[776,441,684,358],()=>t(464)),_N_E=e.O()}]);